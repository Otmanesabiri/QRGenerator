<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>QR Code Stylisé</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <style>
      :root {
        --color-primary: #003087; /* PayPal deep blue */
        --color-primary-alt: #0070ba; /* PayPal blue */
        --color-primary-rgb: 0,48,135;
        --color-accent: #ffb600; /* PayPal yellow */
        --color-accent-rgb: 255,182,0;
        --color-danger: #dc2626;
        --color-warning: #f59e0b;
        --color-bg: #f5f7fa;
        --color-surface: #ffffff;
        --color-surface-alt: #eef2f6;
        --color-border: #d6dde4;
        --color-border-strong: #b9c4cf;
        --color-text: #1d2b38;
        --color-text-soft: #5c6975;
        --color-shadow: 0 2px 5px -1px rgba(0,0,0,0.08), 0 1px 2px rgba(0,0,0,0.06);
        --radius-none: 0;
        --radius-sm: 2px;
        --transition-base: .22s cubic-bezier(.4,.15,.2,1);
        --gradient-primary: linear-gradient(95deg,#003087,#0070ba);
      }

      html { scroll-behavior: smooth; }
      body {
        font-family: 'Poppins', system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Fira Sans', 'Droid Sans', 'Helvetica Neue', Arial, sans-serif;
        background: var(--color-bg);
        color: var(--color-text);
        min-height: 100vh;
        padding: 18px;
        -webkit-font-smoothing: antialiased;
      }
      body.rtl { direction: rtl; }
      *, *::before, *::after { box-sizing: border-box; }

      /* Navbar */
  .professional-nav { background: var(--gradient-primary); border-bottom: 2px solid #002255; }
      .professional-nav .navbar-brand { font-size: 1.05rem; letter-spacing:.5px; color:#fff; }
  .professional-nav .brand-icon { width:32px; height:32px; background:#005caa; color:#fff; font-weight:600; font-size:.75rem; border-radius:2px; }
      .professional-nav .nav-link { padding:.55rem .85rem; border-radius:8px; transition:var(--transition-base); font-size:.92rem; font-weight:500; letter-spacing:.3px; position:relative; }
      .professional-nav .nav-link:hover { background: rgba(255,255,255,0.16); }
      .professional-nav .nav-link.active { background: rgba(255,255,255,0.25); box-shadow: inset 0 0 0 1px rgba(255,255,255,0.25); }
      .professional-nav .nav-link.active::after { display:none; }
      .professional-nav .lang-select { min-width:74px; background: rgba(255,255,255,0.18); color:#fff; border:1px solid rgba(255,255,255,0.35); border-radius:8px; font-size:.75rem; }
      .professional-nav .lang-select:focus { box-shadow:0 0 0 .15rem rgba(255,255,255,0.35); }
      .professional-nav .navbar-collapse { gap:1.5rem; }
      @media (max-width: 991.98px){
        .professional-nav .navbar-collapse { background: var(--gradient-primary); padding: .75rem 1rem 1rem; border-radius: 0 0 14px 14px; }
      }
      body.rtl .professional-nav .navbar-brand { margin-left: 1rem; }

      /* Card base */
  .card { border:1px solid var(--color-border); border-radius:0; background: var(--color-surface); box-shadow: var(--color-shadow); overflow:hidden; }
  .card-header { background: var(--color-primary); color:#fff; border:0; padding: .9rem 1.1rem; }
      .card-header h2 { font-size:1.2rem; font-weight:600; letter-spacing:.5px; }
      .card-body { padding: 1.25rem 1.35rem 1.5rem; }

      /* Section titles */
      h4, h5 { font-weight:600; }
      h4 { font-size:1.05rem; letter-spacing:.3px; }
      h5 { font-size:.95rem; letter-spacing:.25px; }

      /* Forms */
      .form-label { font-weight:500; font-size:.8rem; text-transform:uppercase; letter-spacing:.07rem; color: var(--color-text-soft); margin-bottom: .35rem; }
      .form-control, .form-select { border:1px solid var(--color-border); background: var(--color-surface); border-radius: var(--radius-sm); padding:.55rem .75rem; font-size:.85rem; transition: var(--transition-base); }
      .form-control:focus, .form-select:focus { border-color: var(--color-primary); box-shadow:0 0 0 3px rgba(var(--color-primary-rgb),0.15); }
      textarea.form-control { resize: vertical; min-height:70px; }
      input[type=color].form-control-color { padding:2px; height:40px; width:56px; cursor:pointer; }

      /* Buttons */
      .btn { font-weight:500; letter-spacing:.4px; border-radius: var(--radius-sm); position:relative; overflow:hidden; transition: var(--transition-base); }
  .btn-primary { background:#0070ba; border:1px solid #0065a8; }
  .btn-primary:hover { background:#005caa; border-color:#00569f; }
  .btn-success { background:#003087; border:1px solid #002a76; }
  .btn-success:hover { background:#002a76; border-color:#002669; }
      .btn:active { transform: translateY(1px); }

      /* Preview card */
  .qr-preview-card { display:inline-block; border:1px solid var(--color-border); background: var(--color-surface); border-radius:0; position:relative; box-shadow: var(--color-shadow); transition: var(--transition-base); }
  .qr-preview-card:hover { box-shadow: 0 3px 8px -1px rgba(0,0,0,0.12); transform:none; }
      #previewTitle { font-weight:600; font-size:.95rem; }
      #previewSubtitle { color: var(--color-primary-alt); font-weight:500; font-size:.7rem; letter-spacing:.05rem; text-transform:uppercase; }
      #previewInfo { font-style:italic; color: var(--color-text-soft); font-size:.7rem; }

      /* QR container */
      .qr-container { text-align:center; padding: .75rem; }

      /* Utility blocks */
      .border-top { border-top:1px solid var(--color-border) !important; }
      .text-muted { color: var(--color-text-soft) !important; }
      .bg-white { background:#fff !important; }
  .small { font-size:.72rem; }

      /* About section */
  #about .card { background:#ffffff; }
      #about ul { padding-left:1.1rem; margin-bottom: .75rem; }
      #about li { font-size:.78rem; margin-bottom:.3rem; line-height:1.3; }

      /* Language RTL adjustments */
      body.rtl .form-label { letter-spacing:0; }
      body.rtl .navbar-nav .nav-link { letter-spacing:0; }

      /* Animations subtle */
      @media (prefers-reduced-motion: no-preference) {
        .btn, .form-control, .form-select, .qr-preview-card { transition: var(--transition-base); }
      }

      /* Footer (optional future) */
      .app-footer { text-align:center; font-size:.65rem; color: var(--color-text-soft); margin-top:2rem; padding:1.5rem 0 .5rem; }
    </style>
  <div class="card">
    <div class="card-header text-center bg-primary text-white">
  <h2 class="mb-0" data-i18n="title.main">QR Code Stylisé</h2>
    </div>
    <div class="card-body row">
      <!-- Paramètres -->
      <div class="col-md-6">
        <div class="mb-3">
          <label for="qrText" class="form-label" data-i18n="label.text">Texte ou URL</label>
          <input type="text" class="form-control" id="qrText" value="https://github.com/Otmanesabiri">
        </div>
        <div class="mb-3">
          <label class="form-label" data-i18n="label.colors">Couleurs</label>
          <div class="d-flex gap-3">
            <div>
              <label data-i18n="label.qrColor">QR</label>
              <input type="color" id="foregroundColor" value="#7367F0" class="form-control form-control-color" title="Couleur du QR">
            </div>
            <div>
              <label data-i18n="label.bgColor">Fond</label>
              <input type="color" id="backgroundColor" value="#FFFFFF" class="form-control form-control-color" title="Couleur de fond">
            </div>
          </div>
        </div>
        <div class="mb-3">
          <label for="qrStyle" class="form-label" data-i18n="label.style">Style</label>
          <select id="qrStyle" class="form-select">
            <option value="square" data-i18n="style.square">Carrés</option>
            <option value="dots" data-i18n="style.dots">Points</option>
            <option value="rounded" data-i18n="style.rounded">Arrondi</option>
            <option value="classy" data-i18n="style.classy">Classique</option>
            <option value="classy-rounded" data-i18n="style.classyRounded">Classique Arrondi</option>
          </select>
        </div>
        
        <!-- Informations commerciales -->
        <div class="mb-3 mt-4 border-top pt-3">
          <h5 data-i18n="section.commercialInfo">Informations commerciales</h5>
          <div class="mb-2">
            <label for="qrTitle" class="form-label" data-i18n="label.title">Titre</label>
            <input type="text" class="form-control" id="qrTitle" placeholder="Ex: Offre spéciale, Visitez notre site...">
          </div>
          <div class="mb-2">
            <label for="qrSubtitle" class="form-label" data-i18n="label.subtitle">Sous-titre</label>
            <input type="text" class="form-control" id="qrSubtitle" placeholder="Ex: Valable jusqu'au...">
          </div>
          <div class="mb-2">
            <label for="qrInfo" class="form-label" data-i18n="label.moreInfo">Informations supplémentaires</label>
            <textarea class="form-control" id="qrInfo" rows="2" placeholder="Ex: Présentez ce QR en caisse pour une remise de 10%"></textarea>
          </div>
        </div>
        
  <button id="generateBtn" class="btn btn-primary w-100" data-i18n="btn.generate">Générer</button>
      </div>

      <!-- Aperçu -->
      <div class="col-md-6 text-center">
  <h4 data-i18n="preview.final">Aperçu final</h4>
        <div class="qr-preview-card border rounded-3 p-3 mb-3 bg-white">
          <h5 id="previewTitle" class="mb-1 text-primary"><!-- Titre dynamique --></h5>
          <p id="previewSubtitle" class="small mb-2"><!-- Sous-titre dynamique --></p>
          <div id="qrResult" class="qr-container"></div>
          <p id="previewInfo" class="small mt-2 text-muted"><!-- Infos dynamiques --></p>
        </div>
          <button id="downloadBtn" class="btn btn-success w-100 mt-2" data-i18n="btn.download">📥 Télécharger avec infos</button>
      </div>
    </div>
  </div>

  <!-- Section About -->
  <section id="about" class="mt-5 mb-4">
    <div class="card border-0 shadow-sm">
      <div class="card-body">
  <h3 class="h4 text-primary mb-3" data-i18n="about.title">À propos</h3>
  <p class="mb-2" data-i18n="about.p1">QRGenerator est un outil simple et gratuit conçu pour <strong>aider les personnes, freelances, associations et petites entreprises</strong> à créer rapidement des QR codes personnalisés et prêts à l'emploi.</p>
  <p class="mb-2" data-i18n="about.p2">L'objectif principal est de faciliter la <strong>diffusion d'informations</strong> (sites web, menus, promotions, événements, formulaires, réseaux sociaux) tout en offrant une présentation professionnelle adaptée à un usage commercial.</p>
        <ul class="mb-3">
          <li data-i18n="about.li1">Gain de temps : génération instantanée et personnalisation visuelle.</li>
            <li data-i18n="about.li2">Support marketing : ajout d'un titre et de messages contextuels pour campagnes et affichages.</li>
            <li data-i18n="about.li3">Accessibilité : un QR scannable depuis affiche, flyer, carte de visite ou écran.</li>
            <li data-i18n="about.li4">Image professionnelle : style cohérent avec votre identité visuelle.</li>
        </ul>
  <p class="small text-muted mb-0" data-i18n="about.tip">Astuce : utilisez un message clair et un contraste fort entre le code et son fond pour améliorer le taux de scan.</p>
      </div>
    </div>
  </section>
</div>

<!-- Librairies -->
<script src="https://cdn.jsdelivr.net/npm/qr-code-styling@1.6.0/lib/qr-code-styling.js"></script>
<script src="https://cdn.jsdelivr.net/npm/html2canvas@1.4.1/dist/html2canvas.min.js"></script>
<script>
  // Création du QR Code initial
  let qrCode = new QRCodeStyling({
    width: 300,
    height: 300,
    data: "https://github.com/Otmanesabiri",
    dotsOptions: { color: "#7367F0", type: "square" },
    backgroundOptions: { color: "#FFFFFF" },
    imageOptions: { crossOrigin: "anonymous", margin: 5 }
  });

  // Afficher le QR code dans le conteneur
  qrCode.append(document.getElementById("qrResult"));

  // Récupérer les éléments du DOM
  const qrText = document.getElementById("qrText");
  const foregroundColor = document.getElementById("foregroundColor");
  const backgroundColor = document.getElementById("backgroundColor");
  const qrStyle = document.getElementById("qrStyle");
  const qrTitle = document.getElementById("qrTitle");
  const qrSubtitle = document.getElementById("qrSubtitle");
  const qrInfo = document.getElementById("qrInfo");
  const previewTitle = document.getElementById("previewTitle");
  const previewSubtitle = document.getElementById("previewSubtitle");
  const previewInfo = document.getElementById("previewInfo");

  // Fonction pour mettre à jour le QR code et les informations
  function updateQRAndInfo() {
    // Mettre à jour le QR code
    qrCode.update({
      data: qrText.value,
      dotsOptions: { color: foregroundColor.value, type: qrStyle.value },
      backgroundOptions: { color: backgroundColor.value }
    });
    
    // Mettre à jour les informations dans l'aperçu
    previewTitle.textContent = qrTitle.value;
    previewSubtitle.textContent = qrSubtitle.value;
    previewInfo.textContent = qrInfo.value;
  }

  // Événement pour le bouton de génération
  document.getElementById("generateBtn").addEventListener("click", updateQRAndInfo);
  
  // Mettre à jour dynamiquement les aperçus lorsque les champs sont modifiés
  qrTitle.addEventListener("input", () => { previewTitle.textContent = qrTitle.value; });
  qrSubtitle.addEventListener("input", () => { previewSubtitle.textContent = qrSubtitle.value; });
  qrInfo.addEventListener("input", () => { previewInfo.textContent = qrInfo.value; });

  // Télécharger le QR code avec les informations
  document.getElementById("downloadBtn").addEventListener("click", () => {
    // Capturer toute la carte d'aperçu avec html2canvas
    const qrCard = document.querySelector('.qr-preview-card');
    
    html2canvas(qrCard).then(canvas => {
      // Créer un lien de téléchargement
      const link = document.createElement('a');
      link.download = "qr-code-commercial.png";
      link.href = canvas.toDataURL('image/png');
      link.click();
    });
  });

  // --- Multilingue ---
  const translations = {
    fr: {
      'nav.home': 'Home',
      'nav.about': 'About',
      'title.main': 'QR Code Stylisé',
      'label.text': 'Texte ou URL',
      'label.colors': 'Couleurs',
      'label.qrColor': 'QR',
      'label.bgColor': 'Fond',
      'label.style': 'Style',
      'style.square': 'Carrés',
      'style.dots': 'Points',
      'style.rounded': 'Arrondi',
      'style.classy': 'Classique',
      'style.classyRounded': 'Classique Arrondi',
      'section.commercialInfo': 'Informations commerciales',
      'label.title': 'Titre',
      'label.subtitle': 'Sous-titre',
      'label.moreInfo': 'Informations supplémentaires',
      'btn.generate': 'Générer',
      'preview.final': 'Aperçu final',
      'btn.download': '📥 Télécharger avec infos',
      'about.title': 'À propos',
      'about.p1': "QRGenerator est un outil simple et gratuit conçu pour <strong>aider les personnes, freelances, associations et petites entreprises</strong> à créer rapidement des QR codes personnalisés et prêts à l'emploi.",
      'about.p2': "L'objectif principal est de faciliter la <strong>diffusion d'informations</strong> (sites web, menus, promotions, événements, formulaires, réseaux sociaux) tout en offrant une présentation professionnelle adaptée à un usage commercial.",
      'about.li1': 'Gain de temps : génération instantanée et personnalisation visuelle.',
      'about.li2': "Support marketing : ajout d'un titre et de messages contextuels pour campagnes et affichages.",
      'about.li3': 'Accessibilité : un QR scannable depuis affiche, flyer, carte de visite ou écran.',
      'about.li4': 'Image professionnelle : style cohérent avec votre identité visuelle.',
      'about.tip': "Astuce : utilisez un message clair et un contraste fort entre le code et son fond pour améliorer le taux de scan."
    },
    en: {
      'nav.home': 'Home',
      'nav.about': 'About',
      'title.main': 'Styled QR Code',
      'label.text': 'Text or URL',
      'label.colors': 'Colors',
      'label.qrColor': 'QR',
      'label.bgColor': 'Background',
      'label.style': 'Style',
      'style.square': 'Squares',
      'style.dots': 'Dots',
      'style.rounded': 'Rounded',
      'style.classy': 'Classic',
      'style.classyRounded': 'Classic Rounded',
      'section.commercialInfo': 'Business Information',
      'label.title': 'Title',
      'label.subtitle': 'Subtitle',
      'label.moreInfo': 'Additional Info',
      'btn.generate': 'Generate',
      'preview.final': 'Final Preview',
      'btn.download': '📥 Download with info',
      'about.title': 'About',
      'about.p1': 'QRGenerator is a simple and free tool created to <strong>help individuals, freelancers, associations and small businesses</strong> quickly build customized and ready-to-use QR codes.',
      'about.p2': 'The main goal is to make it easier to <strong>share information</strong> (websites, menus, promotions, events, forms, social media) while providing a professional layout suited for commercial use.',
      'about.li1': 'Save time: instant generation and visual customization.',
      'about.li2': 'Marketing support: add a title and contextual messages for campaigns and displays.',
      'about.li3': 'Accessibility: a QR scannable from poster, flyer, business card or screen.',
      'about.li4': 'Professional image: style consistent with your visual identity.',
      'about.tip': 'Tip: use a clear message and strong contrast between code and background to improve scan rate.'
    },
    ar: {
      'nav.home': 'الرئيسية',
      'nav.about': 'حول',
      'title.main': 'رمز QR منسق',
      'label.text': 'نص أو رابط',
      'label.colors': 'الألوان',
      'label.qrColor': 'الرمز',
      'label.bgColor': 'الخلفية',
      'label.style': 'النمط',
      'style.square': 'مربعات',
      'style.dots': 'نقاط',
      'style.rounded': 'مستدير',
      'style.classy': 'كلاسيكي',
      'style.classyRounded': 'كلاسيكي مستدير',
      'section.commercialInfo': 'معلومات تجارية',
      'label.title': 'العنوان',
      'label.subtitle': 'العنوان الفرعي',
      'label.moreInfo': 'معلومات إضافية',
      'btn.generate': 'توليد',
      'preview.final': 'المعاينة النهائية',
      'btn.download': '📥 تنزيل مع المعلومات',
      'about.title': 'حول',
      'about.p1': 'QRGenerator أداة مجانية وبسيطة صُممت لمساعدة <strong>الأفراد والمستقلين والجمعيات والشركات الصغيرة</strong> على إنشاء رموز QR مخصصة بسرعة وجاهزة للاستخدام.',
      'about.p2': 'الهدف الرئيسي هو تسهيل <strong>مشاركة المعلومات</strong> (مواقع، قوائم، عروض، فعاليات، نماذج، شبكات اجتماعية) مع عرض احترافي مناسب للاستخدام التجاري.',
      'about.li1': 'توفير الوقت: توليد فوري وتخصيص مرئي.',
      'about.li2': 'دعم تسويقي: إضافة عنوان ورسائل سياقية للحملات والعروض.',
      'about.li3': 'إتاحة: رمز قابل للمسح من ملصق أو منشور أو بطاقة عمل أو شاشة.',
      'about.li4': 'صورة احترافية: نمط متوافق مع هويتك البصرية.',
      'about.tip': 'نصيحة: استخدم رسالة واضحة وتبايناً قوياً بين الرمز والخلفية لتحسين معدل المسح.'
    }
  };

  const langSelect = document.getElementById('langSelect');
  function applyTranslations(lang) {
    document.documentElement.lang = lang;
    if (lang === 'ar') {
      document.documentElement.dir = 'rtl';
      document.body.classList.add('rtl');
    } else {
      document.documentElement.dir = 'ltr';
      document.body.classList.remove('rtl');
    }
    const dict = translations[lang];
    document.querySelectorAll('[data-i18n]').forEach(el => {
      const key = el.getAttribute('data-i18n');
      if (dict[key]) {
        if (/(<strong>|<br|<em>)/.test(dict[key])) {
          el.innerHTML = dict[key];
        } else {
          el.textContent = dict[key];
        }
      }
    });
  }
  langSelect.addEventListener('change', e => applyTranslations(e.target.value));
  applyTranslations('fr');

  // --- Activation dynamique du lien actif ---
  const sections = document.querySelectorAll('#home, #about');
  const navLinks = document.querySelectorAll('.nav-link');
  const observer = new IntersectionObserver(entries => {
    entries.forEach(entry => {
      if (entry.isIntersecting) {
        navLinks.forEach(l => l.classList.remove('active'));
        const active = document.querySelector(`.nav-link[href="#${entry.target.id}"]`);
        if (active) active.classList.add('active');
      }
    });
  }, { threshold: 0.4 });
  sections.forEach(s => observer.observe(s));

  // Scroll doux manuel pour compenser le sticky navbar (offset)
  navLinks.forEach(link => {
    link.addEventListener('click', e => {
      if (link.hash) {
        e.preventDefault();
        const target = document.querySelector(link.hash);
        if (target) {
          const y = target.getBoundingClientRect().top + window.scrollY - 60; // offset
          window.scrollTo({ top: y, behavior: 'smooth' });
        }
      }
    });
  });
</script>
</body>
</html>
